"use strict";function syncFactory(t,i,u){var r=this;return function(e,n){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=$.Deferred();return Promise.resolve().then(function(){if(i&&(_.result(n.model,"syncRequiresLogin")||_.result(n,"syncRequiresLogin")))return i.requireLogin({originatingElement:u})}).then(function(){i&&(_.result(n.model,"syncRequiresLogin")||_.result(n,"syncRequiresLogin"))&&(o.beforeSend=function(e){e.setRequestHeader("Authorization","AuthSession "+i.sid)}),o.contentType=o.contentType||"application/json",o.error=function(e,s,t){var r=_.template("An error ocurred. Error code <%- status %>. <%= message %>");500<=e.status&&e.status<=599?alert(r({status:e.status,message:"Server side error. Please contact your administrator."})):400===e.status&&!e.responseJSON&&e.responseText&&-1!==e.responseText.indexOf("Session id")&&-1!==e.responseText.indexOf("is invalid")?i&&(_.result(n.model,"syncRequiresLogin")||_.result(n,"syncRequiresLogin"))?i.showLogin({onHidden:function(){i.checkLogin(o).then(function(){n.trigger("reloadNeeded")},function(){i.sid&&i.logout()})},originatingElement:u}):alert(r({status:e.status,message:e.responseText})):404===e.status||(e.responseJSON&&e.responseJSON.error&&e.responseJSON.error.message?alert(r({status:e.status,message:e.responseJSON.error.message})):e.responseText?alert(r({status:e.status,message:e.responseTextrThrown})):alert(r({status:e.status,message:t})))},t.call(r,e,n,o).then(function(){s.resolve.apply(s,arguments)},function(){s.reject.apply(s,arguments)})}),s}}
//# sourceMappingURL=sync_factory.min.js.map
