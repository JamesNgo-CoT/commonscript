{"version":3,"sources":["scripts/data_model.min.js"],"names":["DataModel","Backbone","Model","extend","attributeTypes","@odata.context","@odata.etag","__CreatedOn","__ModifiedOn","__Owner","syncNeedsLogin","url","base","_","result","this","collection","Error","isNew","replace","encodeURIComponent","get","idAttribute","parse","response","options","key","hasOwnProperty","Number","isNaN","String","moment","isValid","format","prototype","call","sync","method","model","arguments","length","undefined","contentType","data","$","toJSON","JSON","stringify"],"mappings":"AAAA,aAKA,IAAIA,UAAYC,SAASC,MAAMC,OAAO,CAIrCC,eAAgB,CACfC,iBAAkB,SAClBC,cAAe,SACfC,YAAe,SACfC,aAAgB,SAChBC,QAAW,UAGZC,gBAAgB,EAEhBC,IAAK,WACJ,IAAIC,EAAOC,EAAEC,OAAOC,KAAM,YAAcF,EAAEC,OAAOC,KAAKC,WAAY,OAElE,IAAKJ,EACJ,MAAM,IAAIK,MAAM,kDAGjB,OAAIF,KAAKG,QACDN,EAGDA,EAAKO,QAAQ,MAAO,IAAM,KAAQC,mBAAmBL,KAAKM,IAAIN,KAAKO,cAAgB,MAK3FC,MAAO,SAAeC,EAAUC,GAC/B,IAAIrB,EAAiBS,EAAEC,OAAOC,KAAM,kBACpC,GAAIX,EACH,IAAK,IAAIsB,KAAOtB,EACf,GAAIoB,EAASG,eAAeD,IAAyB,MAAjBF,EAASE,GAC5C,OAAQtB,EAAesB,IACtB,IAAK,UACJF,EAASE,GAAOF,EAASE,GAAO,OAAS,QACzC,MAED,IAAK,SACCE,OAAOC,MAAML,EAASE,MAC1BF,EAASE,GAAOI,OAAOF,OAAOJ,EAASE,MAExC,MAED,IAAK,SACJF,EAASE,GAAOI,OAAON,EAASE,IAChC,MAED,IAAK,WACAK,OAAOP,EAASE,IAAMM,YACzBR,EAASE,GAAOK,OAAOP,EAASE,IAAMO,OAAO,yBAE9C,MAED,IAAK,OACAF,OAAOP,EAASE,IAAMM,YACzBR,EAASE,GAAOK,OAAOP,EAASE,IAAMO,OAAO,eAQnD,OAAOhC,SAASC,MAAMgC,UAAUX,MAAMY,KAAKpB,KAAMS,EAAUC,IAG5DW,KAAM,SAAcC,EAAQC,GAC3B,IAAIb,EAA6B,EAAnBc,UAAUC,aAA+BC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,GAIlF,GAFAd,EAAQiB,YAAc,mBAEP,WAAXL,GAAkC,WAAXA,EAAqB,CAC/CZ,EAAQkB,KAAOC,EAAEzC,OAAOY,KAAK8B,OAAOpB,GAAUA,EAAQkB,MAEtD,IAAIvC,EAAiBS,EAAEC,OAAOC,KAAM,kBACpC,GAAIX,EACH,IAAK,IAAIsB,KAAOtB,EACf,GAAIqB,EAAQkB,KAAKhB,eAAeD,IAA6B,MAArBD,EAAQkB,KAAKjB,GACpD,OAAQtB,EAAesB,IACtB,IAAK,UACJD,EAAQkB,KAAKjB,GAA6B,SAAtBD,EAAQkB,KAAKjB,GACjC,MAED,IAAK,SACCE,OAAOC,MAAMJ,EAAQkB,KAAKjB,MAC9BD,EAAQkB,KAAKjB,GAAOE,OAAOH,EAAQkB,KAAKjB,KAEzC,MAED,IAAK,SACJD,EAAQkB,KAAKjB,GAAOI,OAAOL,EAAQkB,KAAKjB,IACxC,MAED,IAAK,WACAK,OAAON,EAAQkB,KAAKjB,GAAM,wBAAwBM,YACrDP,EAAQkB,KAAKjB,GAAOK,OAAON,EAAQkB,KAAKjB,GAAM,wBAAwBO,UAEvE,MAED,IAAK,OACAF,OAAON,EAAQkB,KAAKjB,GAAM,cAAcM,YAC3CP,EAAQkB,KAAKjB,GAAOK,OAAON,EAAQkB,KAAKjB,GAAM,cAAcO,UAE7D,MAED,IAAK,gBACGR,EAAQkB,KAAKjB,GAOzBD,EAAQkB,KAAOG,KAAKC,UAAUtB,EAAQkB,MAGvC,OAAO1C,SAASC,MAAMgC,UAAUE,KAAKD,KAAKpB,KAAMsB,EAAQC,EAAOb","file":"data_model.min.js","sourcesContent":["'use strict';\n\n/* global moment */\n\n/* exported DataModel */\nvar DataModel = Backbone.Model.extend({\n\n\t// PROPERTY DEFINITION\n\n\tattributeTypes: {\n\t\t'@odata.context': 'delete',\n\t\t'@odata.etag': 'delete',\n\t\t'__CreatedOn': 'delete',\n\t\t'__ModifiedOn': 'delete',\n\t\t'__Owner': 'delete'\n\t},\n\n\tsyncNeedsLogin: false,\n\n\turl: function url() {\n\t\tvar base = _.result(this, 'urlRoot') || _.result(this.collection, 'url');\n\n\t\tif (!base) {\n\t\t\tthrow new Error('A \"url\" property or function must be specified');\n\t\t}\n\n\t\tif (this.isNew()) {\n\t\t\treturn base;\n\t\t}\n\n\t\treturn base.replace(/\\/$/, '') + '(\\'' + encodeURIComponent(this.get(this.idAttribute)) + '\\')';\n\t},\n\n\t// METHOD DEFINITION\n\n\tparse: function parse(response, options) {\n\t\tvar attributeTypes = _.result(this, 'attributeTypes');\n\t\tif (attributeTypes) {\n\t\t\tfor (var key in attributeTypes) {\n\t\t\t\tif (response.hasOwnProperty(key) && response[key] != null) {\n\t\t\t\t\tswitch (attributeTypes[key]) {\n\t\t\t\t\t\tcase 'boolean':\n\t\t\t\t\t\t\tresponse[key] = response[key] ? 'true' : 'false';\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'number':\n\t\t\t\t\t\t\tif (!Number.isNaN(response[key])) {\n\t\t\t\t\t\t\t\tresponse[key] = String(Number(response[key]));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'string':\n\t\t\t\t\t\t\tresponse[key] = String(response[key]);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'datetime':\n\t\t\t\t\t\t\tif (moment(response[key]).isValid()) {\n\t\t\t\t\t\t\t\tresponse[key] = moment(response[key]).format('YYYY-MM-DD h:mm:ss a');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'date':\n\t\t\t\t\t\t\tif (moment(response[key]).isValid()) {\n\t\t\t\t\t\t\t\tresponse[key] = moment(response[key]).format('YYYY-MM-DD');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn Backbone.Model.prototype.parse.call(this, response, options);\n\t},\n\n\tsync: function sync(method, model) {\n\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\t\toptions.contentType = 'application/json';\n\n\t\tif (method === 'create' || method === 'update') {\n\t\t\toptions.data = $.extend(this.toJSON(options), options.data);\n\n\t\t\tvar attributeTypes = _.result(this, 'attributeTypes');\n\t\t\tif (attributeTypes) {\n\t\t\t\tfor (var key in attributeTypes) {\n\t\t\t\t\tif (options.data.hasOwnProperty(key) && options.data[key] != null) {\n\t\t\t\t\t\tswitch (attributeTypes[key]) {\n\t\t\t\t\t\t\tcase 'boolean':\n\t\t\t\t\t\t\t\toptions.data[key] = options.data[key] === 'true';\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'number':\n\t\t\t\t\t\t\t\tif (!Number.isNaN(options.data[key])) {\n\t\t\t\t\t\t\t\t\toptions.data[key] = Number(options.data[key]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'string':\n\t\t\t\t\t\t\t\toptions.data[key] = String(options.data[key]);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'datetime':\n\t\t\t\t\t\t\t\tif (moment(options.data[key], 'YYYY/MM/DD h:mm:ss a').isValid()) {\n\t\t\t\t\t\t\t\t\toptions.data[key] = moment(options.data[key], 'YYYY/MM/DD h:mm:ss a').format();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'date':\n\t\t\t\t\t\t\t\tif (moment(options.data[key], 'YYYY/MM/DD').isValid()) {\n\t\t\t\t\t\t\t\t\toptions.data[key] = moment(options.data[key], 'YYYY/MM/DD').format();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'delete':\n\t\t\t\t\t\t\t\tdelete options.data[key];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toptions.data = JSON.stringify(options.data);\n\t\t}\n\n\t\treturn Backbone.Model.prototype.sync.call(this, method, model, options);\n\t}\n});"]}