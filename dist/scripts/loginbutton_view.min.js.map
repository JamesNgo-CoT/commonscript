{"version":3,"sources":["scripts/loginbutton_view.min.js"],"names":["LoginButtonView","Backbone","View","extend","className","cotLogin","events","click .btn-login","click .btn-logout","tagName","doLogin","event","_this","this","preventDefault","showLogin","originatingElement","$","$el","onHidden","checkLogin","then","render","history","stop","start","sid","logout","doLogout","signedInUser","lastName","firstName","filter","value","join","html"],"mappings":"AAAA,aAMA,IAAIA,gBAAkBC,SAASC,KAAKC,OAAO,CAI1CC,UAAW,kBAEXC,SAAU,KAEVC,OAAQ,CACPC,mBAAoB,UACpBC,oBAAqB,YAGtBC,QAAS,OAOTC,QAAS,SAAiBC,GACzB,IAAIC,EAAQC,KAEZF,EAAMG,iBAEND,KAAKR,SAASU,UAAU,CACvBC,mBAAoBC,EAAE,SAAUJ,KAAKK,KACrCC,SAAU,WACTP,EAAMP,SAASe,aAAaC,KAAK,WAChCT,EAAMU,SACNrB,SAASsB,QAAQC,OACjBvB,SAASsB,QAAQE,SACf,WACFb,EAAMU,SACFV,EAAMP,SAASqB,KAClBd,EAAMP,SAASsB,eAUpBC,SAAU,SAAkBjB,GAC3BA,EAAMG,iBACe,MAAjBD,KAAKR,UACRQ,KAAKR,SAASsB,UAQhBL,OAAQ,SAAgBjB,GAEvB,GADAQ,KAAKR,SAAWA,GAAYQ,KAAKR,SACZ,MAAjBQ,KAAKR,UAAyC,MAArBQ,KAAKR,SAASqB,KAAoC,IAArBb,KAAKR,SAASqB,IAAW,CAClF,IAAIG,EAAe,CAAChB,KAAKR,SAASyB,SAAUjB,KAAKR,SAAS0B,WAAWC,OAAO,SAAUC,GACrF,OAAOA,IACLC,KAAK,OAAS,GACjBrB,KAAKK,IAAIiB,KAAK,yFAA2FN,EAAe,2BAExHhB,KAAKK,IAAIiB,KAAK","file":"loginbutton_view.min.js","sourcesContent":["'use strict';\n\n/* exported LoginButtonView */\n/**\n * A Backbone view class for the app's login button.\n */\nvar LoginButtonView = Backbone.View.extend({\n\n\t// PROPERTY DEFINITION\n\n\tclassName: 'LoginButtonView',\n\n\tcotLogin: null,\n\n\tevents: {\n\t\t'click .btn-login': 'doLogin',\n\t\t'click .btn-logout': 'doLogout'\n\t},\n\n\ttagName: 'form',\n\n\t// METHOD DEFINITION\n\n\t/**\n  * Handles login.\n  */\n\tdoLogin: function doLogin(event) {\n\t\tvar _this = this;\n\n\t\tevent.preventDefault();\n\n\t\tthis.cotLogin.showLogin({\n\t\t\toriginatingElement: $('button', this.$el),\n\t\t\tonHidden: function onHidden() {\n\t\t\t\t_this.cotLogin.checkLogin().then(function () {\n\t\t\t\t\t_this.render();\n\t\t\t\t\tBackbone.history.stop();\n\t\t\t\t\tBackbone.history.start();\n\t\t\t\t}, function () {\n\t\t\t\t\t_this.render();\n\t\t\t\t\tif (_this.cotLogin.sid) {\n\t\t\t\t\t\t_this.cotLogin.logout();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Handles logout.\n  */\n\tdoLogout: function doLogout(event) {\n\t\tevent.preventDefault();\n\t\tif (this.cotLogin != null) {\n\t\t\tthis.cotLogin.logout();\n\t\t}\n\t},\n\n\t/**\n  * Renders the login button.\n  * @param {ExtendedCotLogin} cotLogin\n  */\n\trender: function render(cotLogin) {\n\t\tthis.cotLogin = cotLogin || this.cotLogin;\n\t\tif (this.cotLogin != null && this.cotLogin.sid != null && this.cotLogin.sid != '') {\n\t\t\tvar signedInUser = [this.cotLogin.lastName, this.cotLogin.firstName].filter(function (value) {\n\t\t\t\treturn value;\n\t\t\t}).join(', ') || '';\n\t\t\tthis.$el.html('<button type=\"button\" class=\"btn btn-default btn-logout hidden-print\">Logout: <strong>' + signedInUser + '</strong></button>');\n\t\t} else {\n\t\t\tthis.$el.html('<button type=\"button\" class=\"btn btn-default btn-login hidden-print\">Login</button>');\n\t\t}\n\t}\n});"]}