{"version":3,"sources":["scripts/datatable_view.min.js"],"names":["DataTableView","Backbone","View","extend","className","configuration","columns","id","dataTable","template","options","returnValue","index","length","push","_","result","join","getHeaders","showHeaderHtml","$","view","getHeaderFilters","showFooterHtml","getFooterFilters","resetFilters","this","$el","each","element","val","attr","change","$option","find","value","text","search","draw","reload","callback","resetPaging","arguments","undefined","ajax","remove","removeDataTable","prototype","call","destroy","render","_this","serverSide","Promise","resolve","then","preRenderPromises","column","all","html","dt_configuration","orderCellsTop","data","fetchParameters","$count","$filter","filter","searchable","map","$orderby","order","orderBy","configOrderBy","configDataType","dir","start","complete","collection","toJSON","transform","recordsTotal","totalRecords","recordsFiltered","fetch","DataTable","postRenderPromises","events","key","delegateEvents","catch","error","alert","window","console","buttonsConfiguration","buttons","exportOptions","title","dom","columnFilters","booleanEquals","dtColumn","dataSrc","toLowerCase","numberEquals","isNaN","numberBetween","indexOf","nums","split","searches","stringEquals","replace","stringContains","words","i","l","dateEquals","moment","isValid","set","hour","minute","second","millisecond","format","end","add","hours","dateBetween","dates","preRenders","filterHtmlFactory","columnFilter","defaultValue","choices","url","getJSON","Array","isArray","unshift","filterLabel","headerHtml","cid","choice","footerHtml","postRender","$element","daterangepicker","autoUpdateInput","locale","cancelLabel","on","ev","picker","startDate","endDate","synceValue","$headerInput","$footerInput","changeHandler","event","$input","target","closest","keyupHandler"],"mappings":"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","file":"datatable_view.min.js","sourcesContent":["'use strict';\n\n/* global moment */\n\n/* exported DataTableView */\nvar DataTableView = Backbone.View.extend({\n\n\t// PROPERTY DEFINITION\n\n\tclassName: 'DataTableView',\n\n\tconfiguration: {\n\t\tcolumns: function columns() {\n\t\t\treturn [DataTableView.columns.id];\n\t\t}\n\t},\n\n\tdataTable: null,\n\n\ttemplate: function template(options) {\n\t\tfunction getHeaders() {\n\t\t\tvar returnValue = [];\n\t\t\tfor (var index = 0, length = options.configuration.columns.length; index < length; index++) {\n\t\t\t\treturnValue.push('\\n\\t\\t\\t\\t\\t<th scope=\"row\">\\n\\t\\t\\t\\t\\t\\t' + (_.result(options.configuration.columns[index], 'title') || _.result(options.configuration.columns[index], 'data', '')) + '\\n\\t\\t\\t\\t\\t</th>\\n\\t\\t\\t\\t');\n\t\t\t}\n\t\t\treturn returnValue.join('');\n\t\t}\n\n\t\tfunction getHeaderFilters() {\n\t\t\tvar returnValue = [];\n\t\t\tif (options.configuration.showHeaderHtml !== false) {\n\t\t\t\treturnValue.push('<tr>');\n\t\t\t\tfor (var index = 0, length = options.configuration.columns.length; index < length; index++) {\n\t\t\t\t\treturnValue.push('\\n\\t\\t\\t\\t\\t\\t<th data-index=\"' + index + '\" class=\"' + _.result(options.configuration.columns[index], 'className', '') + '\">\\n\\t\\t\\t\\t\\t\\t\\t' + _.result($.extend({ view: options.view }, options.configuration.columns[index]), 'headerHtml', '') + '\\n\\t\\t\\t\\t\\t\\t</th>\\n\\t\\t\\t\\t\\t');\n\t\t\t\t}\n\t\t\t\treturnValue.push('</tr>');\n\t\t\t}\n\t\t\treturn returnValue.join('');\n\t\t}\n\n\t\tfunction getFooterFilters() {\n\t\t\tvar returnValue = [];\n\t\t\tif (options.configuration.showFooterHtml !== false) {\n\t\t\t\treturnValue.push('<tfoot>');\n\t\t\t\treturnValue.push('<tr>');\n\t\t\t\tfor (var index = 0, length = options.configuration.columns.length; index < length; index++) {\n\t\t\t\t\treturnValue.push('\\n\\t\\t\\t\\t\\t\\t<td data-index=\"' + index + '\" class=\"' + _.result(options.configuration.columns[index], 'className', '') + '\">\\n\\t\\t\\t\\t\\t\\t\\t' + _.result($.extend({ view: options.view }, options.configuration.columns[index]), 'footerHtml', '') + '\\n\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t');\n\t\t\t\t}\n\t\t\t\treturnValue.push('</tr>');\n\t\t\t\treturnValue.push('</tfoot>');\n\t\t\t}\n\t\t\treturn returnValue.join('');\n\t\t}\n\n\t\tvar returnValue = '\\n\\t\\t\\t<div class=\"row\">\\n\\t\\t\\t\\t<div class=\"col-xs-12\">\\n\\t\\t\\t\\t\\t<table width=\"100%\" class=\"table table-bordered\">\\n\\t\\t\\t\\t\\t\\t<thead>\\n\\t\\t\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t' + getHeaders() + '\\n\\t\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t\\t\\t' + getHeaderFilters() + '\\n\\t\\t\\t\\t\\t\\t</thead>\\n\\t\\t\\t\\t\\t\\t<tbody></tbody>\\n\\t\\t\\t\\t\\t\\t' + getFooterFilters() + '\\n\\t\\t\\t\\t\\t</table>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t';\n\n\t\treturn returnValue;\n\t},\n\n\t// METHOD DEFINITION\n\n\tresetFilters: function resetFilters() {\n\t\t$('tfoot input[type=\"text\"], thead input[type=\"text\"]', this.$el).each(function (index, element) {\n\t\t\t$(element).val($(element).attr('value') || '').change();\n\t\t});\n\t\t$('tfoot select, thead select', this.$el).each(function (index, element) {\n\t\t\tvar $option = $(element).find('[selected]');\n\t\t\tvar value = $option.attr('value');\n\t\t\t$(element).val(value != null ? value : $option.text()).change();\n\t\t});\n\t\tthis.dataTable.search('').draw();\n\t},\n\n\treload: function reload(callback) {\n\t\tvar resetPaging = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n\t\tif (this.dataTable) {\n\t\t\tthis.dataTable.ajax.reload(callback, resetPaging);\n\t\t}\n\t},\n\n\tremove: function remove() {\n\t\tthis.removeDataTable();\n\t\tBackbone.View.prototype.remove.call(this);\n\t},\n\n\tremoveDataTable: function removeDataTable() {\n\t\tif (this.dataTable) {\n\t\t\tthis.dataTable.destroy();\n\t\t}\n\t},\n\n\trender: function render() {\n\t\tvar _this = this;\n\n\t\tvar configuration = _.result(this, 'configuration');\n\t\tvar columns = configuration.columns = _.result(configuration, 'columns');\n\t\tvar serverSide = configuration.serverSide = _.result(configuration, 'serverSide');\n\n\t\treturn Promise.resolve(this.removeDataTable()).then(function () {\n\n\t\t\t// PRE-RENDER\n\t\t\tvar preRenderPromises = [];\n\t\t\tfor (var index = 0, length = columns.length; index < length; index++) {\n\t\t\t\tvar column = columns[index];\n\t\t\t\tif (column['preRender']) {\n\t\t\t\t\tpreRenderPromises.push(column['preRender'](column, configuration, _this));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn Promise.all(preRenderPromises);\n\t\t}).then(function () {\n\n\t\t\t// RENDER TEMPLATE\n\t\t\t_this.$el.html(_this.template({ configuration: configuration, view: _this }));\n\t\t}).then(function () {\n\n\t\t\t// RENDER DATATABLE\n\t\t\tvar dt_configuration = $.extend({\n\t\t\t\torderCellsTop: true\n\t\t\t}, configuration);\n\n\t\t\tif (serverSide === true) {\n\t\t\t\t$.extend(dt_configuration, {\n\t\t\t\t\tajax: function ajax(data, callback) {\n\n\t\t\t\t\t\t// TODO.\n\t\t\t\t\t\t// const defaultFetchParameters = _.result(this.collection, 'fetchParameters');\n\n\t\t\t\t\t\tvar fetchParameters = {};\n\n\t\t\t\t\t\t// $count\n\t\t\t\t\t\tfetchParameters['$count'] = true;\n\n\t\t\t\t\t\t// $filter\n\t\t\t\t\t\tvar $filter = data.columns.filter(function (value) {\n\t\t\t\t\t\t\treturn value.searchable && value.search && value.search.value;\n\t\t\t\t\t\t}).map(function (value) {\n\t\t\t\t\t\t\treturn value.search.value;\n\t\t\t\t\t\t}).join(' and ');\n\t\t\t\t\t\tif ($filter) {\n\t\t\t\t\t\t\tfetchParameters['$filter'] = $filter;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// $orderby\n\t\t\t\t\t\tvar $orderby = data.order.map(function (value) {\n\t\t\t\t\t\t\tvar orderBy = data.columns[value.column].data;\n\n\t\t\t\t\t\t\tvar configOrderBy = _.result(configuration.columns[value.column], 'orderBy');\n\t\t\t\t\t\t\tvar configDataType = _.result(configuration.columns[value.column], 'dataType');\n\n\t\t\t\t\t\t\tif (configOrderBy) {\n\t\t\t\t\t\t\t\torderBy = configOrderBy;\n\t\t\t\t\t\t\t} else if (configDataType) {\n\t\t\t\t\t\t\t\tif (configDataType === 'string') {\n\t\t\t\t\t\t\t\t\torderBy = 'tolower(' + orderBy + ')';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn orderBy + ' ' + value.dir;\n\t\t\t\t\t\t}).join(',');\n\t\t\t\t\t\tif ($orderby) {\n\t\t\t\t\t\t\tfetchParameters['$orderby'] = $orderby;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// $search\n\t\t\t\t\t\tif (data.search && data.search.value) {\n\t\t\t\t\t\t\tfetchParameters['$search'] = '\"' + data.search.value + '\"';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// $select\n\t\t\t\t\t\t// NOTE: $select is problematic. C3API does not like undefined columns.\n\n\t\t\t\t\t\t// $skip\n\t\t\t\t\t\tfetchParameters['$skip'] = data.start;\n\n\t\t\t\t\t\t// $top\n\t\t\t\t\t\tfetchParameters['$top'] = data.length;\n\n\t\t\t\t\t\tvar complete = function complete() {\n\t\t\t\t\t\t\tcallback({\n\t\t\t\t\t\t\t\tdata: _this.collection.toJSON({ transform: false }),\n\t\t\t\t\t\t\t\tdraw: data.draw,\n\t\t\t\t\t\t\t\trecordsTotal: _this.collection.totalRecords || 0,\n\t\t\t\t\t\t\t\trecordsFiltered: _this.collection.totalRecords || 0\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t_this.collection.fetch({\n\t\t\t\t\t\t\tfetchParameters: fetchParameters\n\t\t\t\t\t\t}).then(complete, complete);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t$.extend(dt_configuration, {\n\t\t\t\t\tdata: _this.collection.toJSON()\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t_this.dataTable = _this.$el.find('table').DataTable(dt_configuration);\n\t\t}).then(function () {\n\n\t\t\t// Post Render and Event.\n\t\t\tvar postRenderPromises = [];\n\t\t\tfor (var index = 0, length = columns.length; index < length; index++) {\n\n\t\t\t\tvar column = columns[index];\n\t\t\t\tif (column['postRender']) {\n\t\t\t\t\tpostRenderPromises.push(column['postRender'](column, _this.configuration, _this));\n\t\t\t\t}\n\n\t\t\t\tif (column['events'] != null) {\n\t\t\t\t\tif (_this.events == null) {\n\t\t\t\t\t\t_this.events = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tvar events = _.result($.extend({ view: _this }, column), 'events');\n\t\t\t\t\tfor (var key in events) {\n\t\t\t\t\t\t_this.events[key] = events[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_this.delegateEvents();\n\n\t\t\treturn Promise.all(postRenderPromises);\n\t\t}).then(function () {\n\t\t\t$('thead input, thead select, tfoot input, tfoot select', _this.$el).change();\n\t\t}).catch(function (error) {\n\t\t\tif (error) {\n\t\t\t\talert('An error occured. ' + error);\n\t\t\t\t/* eslint-disable no-console */\n\t\t\t\tif (window.console && console.error) {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t}\n\t\t\t\t/* eslint-enable no-console */\n\t\t\t}\n\t\t});\n\t}\n}, {\n\n\t//////////////////////////////////////////////////////////////////////////////\n\t// BUTTONS CONFIGURATION\n\t//////////////////////////////////////////////////////////////////////////////\n\n\tbuttonsConfiguration: function buttonsConfiguration() {\n\t\treturn {\n\t\t\tbuttons: [{\n\t\t\t\textend: 'copyHtml5',\n\t\t\t\texportOptions: { columns: ':visible:not(.excludeFromButtons)' },\n\t\t\t\ttitle: this.title\n\t\t\t}, {\n\t\t\t\textend: 'csvHtml5',\n\t\t\t\texportOptions: { columns: ':visible:not(.excludeFromButtons)' },\n\t\t\t\ttitle: this.title\n\t\t\t}, {\n\t\t\t\textend: 'excelHtml5',\n\t\t\t\texportOptions: { columns: ':visible:not(.excludeFromButtons)' },\n\t\t\t\ttitle: this.title\n\t\t\t}, {\n\t\t\t\textend: 'pdfHtml5',\n\t\t\t\texportOptions: { columns: ':visible:not(.excludeFromButtons)' },\n\t\t\t\ttitle: this.title\n\t\t\t}, {\n\t\t\t\textend: 'print',\n\t\t\t\texportOptions: { columns: ':visible:not(.excludeFromButtons)' },\n\t\t\t\ttitle: this.title\n\t\t\t}],\n\n\t\t\tdom: '<\\'row\\'<\\'col-sm-6\\'l><\\'col-sm-6\\'f>><\\'row\\'<\\'col-sm-12\\'<\\'table-responsive\\'tr>>><\\'row\\'<\\'col-sm-5\\'i><\\'col-sm-7\\'p>>B'\n\t\t};\n\t},\n\n\t//////////////////////////////////////////////////////////////////////////////\n\t// COLUMN FILTERS\n\t//////////////////////////////////////////////////////////////////////////////\n\n\tcolumnFilters: {\n\t\t'booleanEquals': function booleanEquals(serverSide, value, dtColumn) {\n\t\t\tvar search = '';\n\n\t\t\tif (value) {\n\t\t\t\tif (serverSide) {\n\t\t\t\t\tif (value === '$EMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq null';\n\t\t\t\t\t} else if (value === '$NOTEMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' ne null';\n\t\t\t\t\t} else if (value.toLowerCase() === 'true' || value.toLowerCase() === 'false') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq ' + value.toLowerCase();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsearch = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (search !== dtColumn.search()) {\n\t\t\t\tdtColumn.search(search);\n\t\t\t\tdtColumn.draw();\n\t\t\t}\n\t\t},\n\n\t\t'numberEquals': function numberEquals(serverSide, value, dtColumn) {\n\t\t\tvar search = '';\n\n\t\t\tif (value) {\n\t\t\t\tif (serverSide) {\n\t\t\t\t\tif (value === '$EMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq null';\n\t\t\t\t\t} else if (value === '$NOTEMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' ne null';\n\t\t\t\t\t} else if (!isNaN(value)) {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq ' + value.toLowerCase();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsearch = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (search !== dtColumn.search()) {\n\t\t\t\tdtColumn.search(search);\n\t\t\t\tdtColumn.draw();\n\t\t\t}\n\t\t},\n\n\t\t'numberBetween': function numberBetween(serverSide, value, dtColumn) {\n\t\t\tvar search = '';\n\n\t\t\tif (value) {\n\t\t\t\tif (serverSide) {\n\t\t\t\t\tif (value === '$EMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq null';\n\t\t\t\t\t} else if (value === '$NOTEMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' ne null';\n\t\t\t\t\t} else if (value.toLowerCase().indexOf('to') !== -1) {\n\t\t\t\t\t\tvar nums = value.toLowerCase().split('to');\n\t\t\t\t\t\tif (!isNaN(nums[0]) || !isNaN(nums[0])) {\n\t\t\t\t\t\t\tvar searches = [];\n\t\t\t\t\t\t\tif (!isNaN(nums[0])) {\n\t\t\t\t\t\t\t\tsearches[0] = dtColumn.dataSrc() + ' ge ' + nums[0];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsearches[0] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!isNaN(nums[1])) {\n\t\t\t\t\t\t\t\tsearches[1] = dtColumn.dataSrc() + ' le ' + nums[1];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsearches[1] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsearch = searches.filter(function (val) {\n\t\t\t\t\t\t\t\treturn val;\n\t\t\t\t\t\t\t}).join(' and ');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsearch = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (search !== dtColumn.search()) {\n\t\t\t\tdtColumn.search(search);\n\t\t\t\tdtColumn.draw();\n\t\t\t}\n\t\t},\n\n\t\t'stringEquals': function stringEquals(serverSide, value, dtColumn) {\n\t\t\tvar search = '';\n\n\t\t\tif (value) {\n\t\t\t\tif (serverSide) {\n\t\t\t\t\tif (value === '$EMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq null';\n\t\t\t\t\t} else if (value === '$NOTEMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' ne null';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// search = `tolower(${dtColumn.dataSrc()}) eq '${value.toLowerCase().replace('\\'', '\\'\\'')}'`;\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq \\'' + value.replace(\"'\", \"''\") + '\\'';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsearch = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (search !== dtColumn.search()) {\n\t\t\t\tdtColumn.search(search);\n\t\t\t\tdtColumn.draw();\n\t\t\t}\n\t\t},\n\n\t\t'stringContains': function stringContains(serverSide, value, dtColumn) {\n\t\t\tvar search = '';\n\n\t\t\tif (value) {\n\t\t\t\tif (serverSide) {\n\t\t\t\t\tif (value === '$EMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq null';\n\t\t\t\t\t} else if (value === '$NOTEMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' ne null';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar words = value.toLowerCase().split(' ');\n\t\t\t\t\t\tvar searches = [];\n\t\t\t\t\t\tfor (var i = 0, l = words.length; i < l; i++) {\n\t\t\t\t\t\t\tsearches.push('contains(tolower(' + dtColumn.dataSrc() + '),\\'' + words[i].toLowerCase().replace('\\'', '\\'\\'') + '\\')');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsearch = searches.join(' and ');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsearch = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (search !== dtColumn.search()) {\n\t\t\t\tdtColumn.search(search);\n\t\t\t\tdtColumn.draw();\n\t\t\t}\n\t\t},\n\t\t// },\n\n\t\t'dateEquals': function dateEquals(serverSide, value, dtColumn) {\n\t\t\tvar search = '';\n\n\t\t\tif (value) {\n\t\t\t\tif (serverSide) {\n\t\t\t\t\tif (value === '$EMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq null';\n\t\t\t\t\t} else if (value === '$NOTEMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' ne null';\n\t\t\t\t\t} else if (moment(value, 'l').isValid()) {\n\t\t\t\t\t\tvar start = moment(value, 'l').set({\n\t\t\t\t\t\t\thour: 0,\n\t\t\t\t\t\t\tminute: 0,\n\t\t\t\t\t\t\tsecond: 0,\n\t\t\t\t\t\t\tmillisecond: 0\n\t\t\t\t\t\t}).format();\n\t\t\t\t\t\tvar end = moment(start).add({\n\t\t\t\t\t\t\thours: 24\n\t\t\t\t\t\t}).format();\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' ge ' + start + ' and ' + dtColumn.dataSrc() + ' le ' + end;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsearch = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (search !== dtColumn.search()) {\n\t\t\t\tdtColumn.search(search);\n\t\t\t\tdtColumn.draw();\n\t\t\t}\n\t\t},\n\n\t\t'dateBetween': function dateBetween(serverSide, value, dtColumn) {\n\t\t\tvar search = '';\n\n\t\t\tif (value) {\n\t\t\t\tif (serverSide) {\n\t\t\t\t\tif (value === '$EMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq null';\n\t\t\t\t\t} else if (value === '$NOTEMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' ne null';\n\t\t\t\t\t} else if (value.toLowerCase().indexOf('to') !== -1) {\n\t\t\t\t\t\tvar dates = value.toLowerCase().split('to');\n\t\t\t\t\t\t// console.log('DATES', dates);\n\t\t\t\t\t\tif (moment(dates[0]).isValid() || moment(dates[1]).isValid()) {\n\t\t\t\t\t\t\tvar searches = [];\n\t\t\t\t\t\t\tif (moment(dates[0]).isValid()) {\n\t\t\t\t\t\t\t\tvar start = moment(dates[0]).set({\n\t\t\t\t\t\t\t\t\thour: 0,\n\t\t\t\t\t\t\t\t\tminute: 0,\n\t\t\t\t\t\t\t\t\tsecond: 0,\n\t\t\t\t\t\t\t\t\tmillisecond: 0\n\t\t\t\t\t\t\t\t}).format();\n\t\t\t\t\t\t\t\tsearches[0] = dtColumn.dataSrc() + ' ge ' + start;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsearches[0] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (moment(dates[1]).isValid()) {\n\t\t\t\t\t\t\t\tvar end = moment(dates[1]).set({\n\t\t\t\t\t\t\t\t\thour: 0,\n\t\t\t\t\t\t\t\t\tminute: 0,\n\t\t\t\t\t\t\t\t\tsecond: 0,\n\t\t\t\t\t\t\t\t\tmillisecond: 0\n\t\t\t\t\t\t\t\t}).add({\n\t\t\t\t\t\t\t\t\thours: 24\n\t\t\t\t\t\t\t\t}).format();\n\t\t\t\t\t\t\t\tsearches[1] = dtColumn.dataSrc() + ' le ' + end;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsearches[1] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsearch = searches.filter(function (val) {\n\t\t\t\t\t\t\t\treturn val;\n\t\t\t\t\t\t\t}).join(' and ');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsearch = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (search !== dtColumn.search()) {\n\t\t\t\tdtColumn.search(search);\n\t\t\t\tdtColumn.draw();\n\t\t\t}\n\t\t}\n\t},\n\n\t//////////////////////////////////////////////////////////////////////////////\n\t// COLUMNS\n\t//////////////////////////////////////////////////////////////////////////////\n\n\tcolumns: {\n\t\t'id': {\n\t\t\tdata: 'id',\n\t\t\ttitle: 'ID'\n\t\t}\n\t},\n\n\t//////////////////////////////////////////////////////////////////////////////\n\t// PRE RENDERS\n\t//////////////////////////////////////////////////////////////////////////////\n\n\tpreRenders: {\n\t\t'filterHtmlFactory': function filterHtmlFactory(columnFilter, defaultValue) {\n\t\t\tif (typeof columnFilter === 'string') {\n\t\t\t\tcolumnFilter = DataTableView.columnFilters[columnFilter];\n\t\t\t}\n\t\t\treturn function (column, configuration, view) {\n\t\t\t\treturn Promise.resolve().then(function () {\n\t\t\t\t\tif (column.choices && typeof column.choices === 'string') {\n\t\t\t\t\t\treturn new Promise(function (resolve) {\n\t\t\t\t\t\t\tvar url = column.choices;\n\t\t\t\t\t\t\tcolumn.choices = [];\n\t\t\t\t\t\t\t$.getJSON(url).then(function (data) {\n\t\t\t\t\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\t\t\t\t\tcolumn.choices = data;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}, function () {\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).then(function () {\n\t\t\t\t\tif (column.choices) {\n\t\t\t\t\t\tif (column.choices.length === 0 || column.choices[0].value != null && column.choices[0].value !== '' || column.choices[0].value == null && column.choices[0].text !== '') {\n\t\t\t\t\t\t\tcolumn.choices.unshift({ text: '' });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcolumn.choices[0].text = column.filterLabel || 'Filter by ' + column.title;\n\t\t\t\t\t\tcolumn.choices[0].value = '';\n\t\t\t\t\t\tcolumn.headerHtml = '\\n\\t\\t\\t\\t\\t\\t\\t<label class=\"sr-only\" for=\"' + column.data + '_header_' + view.cid + '\">Filter ' + (column.title || column.data) + '</label>\\n\\t\\t\\t\\t\\t\\t\\t<select class=\"form-control\" id=\"' + column.data + '_header_' + view.cid + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t' + column.choices.map(function (choice) {\n\t\t\t\t\t\t\treturn '<option value=\"' + (choice.value != null ? choice.value : choice.text) + '\"' + (choice.value != null && choice.value === defaultValue || choice.value == null && choice.text === defaultValue ? ' selected' : '') + '>' + choice.text + '</option>';\n\t\t\t\t\t\t}).join('') + '\\n\\t\\t\\t\\t\\t\\t\\t</select>\\n\\t\\t\\t\\t\\t\\t';\n\t\t\t\t\t\tcolumn.footerHtml = '\\n\\t\\t\\t\\t\\t\\t\\t<label class=\"sr-only\" for=\"' + column.data + '_footer_' + view.cid + '\">Filter ' + (column.title || column.data) + '</label>\\n\\t\\t\\t\\t\\t\\t\\t<select class=\"form-control\" id=\"' + column.data + '_footer_' + view.cid + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t' + column.choices.map(function (choice) {\n\t\t\t\t\t\t\treturn '<option value=\"' + (choice.value != null ? choice.value : choice.text) + '\"' + (choice.value != null && choice.value === defaultValue || choice.value == null && choice.text === defaultValue ? ' selected' : '') + '>' + choice.text + '</option>';\n\t\t\t\t\t\t}).join('') + '\\n\\t\\t\\t\\t\\t\\t\\t</select>\\n\\t\\t\\t\\t\\t\\t';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcolumn.headerHtml = '\\n\\t\\t\\t\\t\\t\\t\\t<label class=\"sr-only\" for=\"' + column.data + '_header_' + view.cid + '\">Filter ' + (column.title || column.data) + '</label>\\n\\t\\t\\t\\t\\t\\t\\t<input type=\"text\" class=\"form-control\" id=\"' + column.data + '_header_' + view.cid + '\"' + (defaultValue ? ' value=\"' + defaultValue + '\"' : '') + ' placeholder=\"' + (column.filterLabel || 'Filter by ' + column.title) + '\">\\n\\t\\t\\t\\t\\t\\t';\n\t\t\t\t\t\tcolumn.footerHtml = '\\n\\t\\t\\t\\t\\t\\t\\t<label class=\"sr-only\" for=\"' + column.data + '_footer_' + view.cid + '\">Filter ' + (column.title || column.data) + '</label>\\n\\t\\t\\t\\t\\t\\t\\t<input type=\"text\" class=\"form-control\" id=\"' + column.data + '_footer_' + view.cid + '\"' + (defaultValue ? ' value=\"' + defaultValue + '\"' : '') + ' placeholder=\"' + (column.filterLabel || 'Filter by ' + column.title) + '\">\\n\\t\\t\\t\\t\\t\\t';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (columnFilter === DataTableView.columnFilters['dateBetween']) {\n\t\t\t\t\t\tcolumn.postRender = function () {\n\t\t\t\t\t\t\tvar postRender = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n\t\t\t\t\t\t\treturn function (column, configuration, view) {\n\t\t\t\t\t\t\t\tpostRender.call(undefined, column, configuration, view);\n\t\t\t\t\t\t\t\t$('#' + column.data + '_header_' + view.cid + ', #' + column.data + '_footer_' + view.cid, view.$el).each(function (index, element) {\n\t\t\t\t\t\t\t\t\tvar $element = $(element);\n\n\t\t\t\t\t\t\t\t\t$element.daterangepicker({\n\t\t\t\t\t\t\t\t\t\tautoUpdateInput: false,\n\t\t\t\t\t\t\t\t\t\tlocale: {\n\t\t\t\t\t\t\t\t\t\t\tcancelLabel: 'Clear'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t$element.on('apply.daterangepicker', function (ev, picker) {\n\t\t\t\t\t\t\t\t\t\t$(this).val(picker.startDate.format('YYYY/MM/DD') + ' to ' + picker.endDate.format('YYYY/MM/DD')).change();\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t$element.on('cancel.daterangepicker', function () {\n\t\t\t\t\t\t\t\t\t\t$(this).val('');\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}(column.postRender);\n\t\t\t\t\t} else if (columnFilter === DataTableView.columnFilters['dateEquals']) {\n\t\t\t\t\t\t// TODO\n\t\t\t\t\t\t// column.postRender = ((postRender = (() => {})) => {\n\t\t\t\t\t\t// \treturn (column, configuration, view) => {\n\t\t\t\t\t\t// \t\tpostRender.call(this, column, configuration, view);\n\t\t\t\t\t\t// \t\t$(`#${column.data}_header_${view.cid}, #${column.data}_footer_${view.cid}`, view.$el).each((index, element) => {\n\t\t\t\t\t\t// \t\t\t$(element).datetimepicker({\n\t\t\t\t\t\t// \t\t\t\tformat: 'YYYY/MM/DD'\n\t\t\t\t\t\t// \t\t\t});\n\t\t\t\t\t\t// \t\t});\n\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t// })(column.postRender);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!column.events) {\n\t\t\t\t\t\tcolumn.events = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tvar synceValue = function synceValue(value) {\n\t\t\t\t\t\tvar $headerInput = $('#' + column.data + '_header_' + view.cid);\n\t\t\t\t\t\tif ($headerInput.val() !== value) {\n\t\t\t\t\t\t\t$headerInput.val(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar $footerInput = $('#' + column.data + '_footer_' + view.cid);\n\t\t\t\t\t\tif ($footerInput.val() !== value) {\n\t\t\t\t\t\t\t$footerInput.val(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tvar changeHandler = function changeHandler(event) {\n\t\t\t\t\t\tvar $input = $(event.target);\n\t\t\t\t\t\tvar value = $input.val();\n\t\t\t\t\t\t// const index = $input.closest('tr').children('td, th').index($input.closest('td, th'));\n\t\t\t\t\t\tvar index = +$input.closest('td, th').data('index');\n\t\t\t\t\t\tsynceValue(value);\n\t\t\t\t\t\tcolumnFilter(configuration.serverSide, value, view.dataTable.column(index));\n\t\t\t\t\t};\n\t\t\t\t\tcolumn.events['change #' + column.data + '_header_' + view.cid] = changeHandler;\n\t\t\t\t\tcolumn.events['change #' + column.data + '_footer_' + view.cid] = changeHandler;\n\n\t\t\t\t\tvar keyupHandler = function keyupHandler(event) {\n\t\t\t\t\t\tvar $input = $(event.target);\n\t\t\t\t\t\tvar value = $input.val();\n\t\t\t\t\t\t// const index = $input.closest('tr').children('td, th').index($input.closest('td, th'));\n\t\t\t\t\t\tvar index = +$input.closest('td, th').data('index');\n\t\t\t\t\t\tsynceValue(value);\n\t\t\t\t\t\tcolumnFilter(configuration.serverSide, value, view.dataTable.column(index));\n\t\t\t\t\t};\n\t\t\t\t\tcolumn.events['keyup #' + column.data + '_header_' + view.cid] = keyupHandler;\n\t\t\t\t\tcolumn.events['keyup #' + column.data + '_footer_' + view.cid] = keyupHandler;\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t}\n});"]}