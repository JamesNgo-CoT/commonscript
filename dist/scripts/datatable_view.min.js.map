{"version":3,"sources":["scripts/datatable_view.min.js"],"names":["DataTableView","Backbone","View","extend","className","configuration","columns","id","dataTable","template","_","reload","callback","resetPaging","arguments","length","undefined","this","ajax","remove","removeDataTable","prototype","call","destroy","render","render2","_this","result","Promise","resolve","then","preRenderPromises","index","column","push","all","$el","html","view","dt_configuration","$","data","fetchParameters","$count","$filter","filter","value","searchable","search","map","join","$orderby","order","dir","start","complete","collection","toJSON","transform","draw","recordsTotal","totalRecords","recordsFiltered","fetch","find","DataTable","postRenderPromises","events","key","delegateEvents","buttonsConfiguration","buttons","exportOptions","dom","columnFilters","booleanEquals","serverSide","dtColumn","dataSrc","toLowerCase","numberEquals","isNaN","numberBetween","indexOf","nums","split","searches","val","stringEquals","stringContains","words","i","l","dateEquals","moment","isValid","set","hour","minute","second","millisecond","format","end","add","hours","dateBetween","dates","title","preRenders","searchFooterFactory","columnFilter","choices","footerHtml","cid","text","choice","event","$input","currentTarget","closest"],"mappings":"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","file":"datatable_view.min.js","sourcesContent":["'use strict';\n\n/* global moment */\n\n/* exported DataTableView */\nvar DataTableView = Backbone.View.extend({\n\n\t// PROPERTY DEFINITION\n\n\tclassName: 'DataTableView',\n\n\tconfiguration: {\n\t\tcolumns: function columns() {\n\t\t\treturn [DataTableView.columns.id];\n\t\t}\n\t},\n\n\tdataTable: null,\n\n\ttemplate: _.template('<!-- datatable_view.template.html -->\\n<div class=\"row\">\\n\\t<div class=\"col-xs-12\">\\n\\t\\t<table width=\"100%\" class=\"table table-bordered\">\\n\\t\\t\\t<thead>\\n\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t<% for (var index = 0, length = configuration.columns.length; index < length; index++) { %>\\n\\t\\t\\t\\t\\t<th>\\n\\t\\t\\t\\t\\t\\t<%- _.result(configuration.columns[index], \\'title\\') || _.result(configuration.columns[index], \\'data\\', \\'\\') %>\\n\\t\\t\\t\\t\\t\\t<div data-index=\"<%- index %>\">\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</th>\\n\\t\\t\\t\\t\\t<% } %>\\n\\t\\t\\t\\t</tr>\\n\\t\\t\\t</thead>\\n\\t\\t\\t<tbody></tbody>\\n\\t\\t\\t<tfoot>\\n\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t<% for (var index = 0, length = configuration.columns.length; index < length; index++) { %>\\n\\t\\t\\t\\t\\t<td data-index=\"<%- index %>\">\\n\\t\\t\\t\\t\\t\\t<%= _.result($.extend({view: view }, configuration.columns[index]), \\'footerHtml\\', \\'\\') %>\\n\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t<% } %>\\n\\t\\t\\t\\t</tr>\\n\\t\\t\\t</tfoot>\\n\\t\\t</table>\\n\\t</div>\\n</div>\\n'),\n\n\t// METHOD DEFINITION\n\n\treload: function reload(callback) {\n\t\tvar resetPaging = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n\t\tif (this.dataTable) {\n\t\t\tthis.dataTable.ajax.reload(callback, resetPaging);\n\t\t}\n\t},\n\n\tremove: function remove() {\n\t\tthis.removeDataTable();\n\t\tBackbone.View.prototype.remove.call(this);\n\t},\n\n\tremoveDataTable: function removeDataTable() {\n\t\tif (this.dataTable) {\n\t\t\tthis.dataTable.destroy();\n\t\t}\n\t},\n\n\trender: function render() {},\n\n\trender2: function render2() {\n\t\tvar _this = this;\n\n\t\tvar configuration = _.result(this, 'configuration');\n\t\tvar columns = configuration.columns = _.result(configuration, 'columns');\n\n\t\treturn Promise.resolve(this.removeDataTable()).then(function () {\n\n\t\t\t// PRE-RENDER\n\t\t\tvar preRenderPromises = [];\n\t\t\tfor (var index = 0, length = columns.length; index < length; index++) {\n\t\t\t\tvar column = columns[index];\n\t\t\t\tif (column['preRender']) {\n\t\t\t\t\tpreRenderPromises.push(column['preRender'](column, configuration, _this));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn Promise.all(preRenderPromises);\n\t\t}).then(function () {\n\n\t\t\t// RENDER TEMPLATE\n\t\t\t_this.$el.html(_this.template({ configuration: configuration, view: _this }));\n\t\t}).then(function () {\n\n\t\t\t// RENDER DATATABLE\n\t\t\tvar dt_configuration = $.extend({}, configuration);\n\t\t\tif (configuration['serverSide'] === true) {\n\t\t\t\t$.extend(dt_configuration, {\n\t\t\t\t\tajax: function ajax(data, callback) {\n\n\t\t\t\t\t\t// TODO.\n\t\t\t\t\t\t// const defaultFetchParameters = _.result(this.collection, 'fetchParameters');\n\n\t\t\t\t\t\tvar fetchParameters = {};\n\n\t\t\t\t\t\t// $count\n\t\t\t\t\t\tfetchParameters['$count'] = true;\n\n\t\t\t\t\t\t// $filter\n\t\t\t\t\t\tvar $filter = data.columns.filter(function (value) {\n\t\t\t\t\t\t\treturn value.searchable && value.search && value.search.value;\n\t\t\t\t\t\t}).map(function (value) {\n\t\t\t\t\t\t\treturn value.search.value;\n\t\t\t\t\t\t}).join(' and ');\n\t\t\t\t\t\tif ($filter) {\n\t\t\t\t\t\t\tfetchParameters['$filter'] = $filter;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// $orderby\n\t\t\t\t\t\tvar $orderby = data.order.map(function (value) {\n\t\t\t\t\t\t\treturn data.columns[value.column].data + ' ' + value.dir;\n\t\t\t\t\t\t}).join(',');\n\t\t\t\t\t\tif ($orderby) {\n\t\t\t\t\t\t\tfetchParameters['$orderby'] = $orderby;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// $search\n\t\t\t\t\t\tif (data.search && data.search.value) {\n\t\t\t\t\t\t\tfetchParameters['$search'] = '\"' + data.search.value + '\"';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// $select\n\t\t\t\t\t\t// NOTE: $select is problematic. C3API does not like undefined columns.\n\n\t\t\t\t\t\t// $skip\n\t\t\t\t\t\tfetchParameters['$skip'] = data.start;\n\n\t\t\t\t\t\t// $top\n\t\t\t\t\t\tfetchParameters['$top'] = data.length;\n\n\t\t\t\t\t\tvar complete = function complete() {\n\t\t\t\t\t\t\tcallback({\n\t\t\t\t\t\t\t\tdata: _this.collection.toJSON({ transform: false }),\n\t\t\t\t\t\t\t\tdraw: data.draw,\n\t\t\t\t\t\t\t\trecordsTotal: _this.collection.totalRecords || 0,\n\t\t\t\t\t\t\t\trecordsFiltered: _this.collection.totalRecords || 0\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t_this.collection.fetch({\n\t\t\t\t\t\t\tfetchParameters: fetchParameters\n\t\t\t\t\t\t}).then(complete, complete);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t$.extend(dt_configuration, {\n\t\t\t\t\tdata: _this.collection.toJSON({ transform: false })\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t_this.dataTable = _this.$el.find('table').DataTable(dt_configuration);\n\t\t}).then(function () {\n\n\t\t\t// Post Render and Event.\n\t\t\tvar postRenderPromises = [];\n\t\t\tfor (var index = 0, length = columns.length; index < length; index++) {\n\n\t\t\t\tvar column = columns[index];\n\t\t\t\tif (column['postRender']) {\n\t\t\t\t\tpostRenderPromises.push(column['postRender'](column, _this.configuration, _this));\n\t\t\t\t}\n\n\t\t\t\tif (column['events'] != null) {\n\t\t\t\t\tif (_this.events == null) {\n\t\t\t\t\t\t_this.events = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tvar events = _.result($.extend({ view: _this }, column), 'events');\n\t\t\t\t\tfor (var key in events) {\n\t\t\t\t\t\t_this.events[key] = events[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_this.delegateEvents();\n\n\t\t\treturn Promise.all(postRenderPromises);\n\t\t});\n\t}\n}, {\n\n\t//////////////////////////////////////////////////////////////////////////////\n\t// BUTTONS CONFIGURATION\n\t//////////////////////////////////////////////////////////////////////////////\n\n\tbuttonsConfiguration: {\n\t\tbuttons: [{\n\t\t\textend: 'copyHtml5',\n\t\t\texportOptions: { columns: ':visible:not(.excludeFromButtons)' }\n\t\t}, {\n\t\t\textend: 'csvHtml5',\n\t\t\texportOptions: { columns: ':visible:not(.excludeFromButtons)' }\n\t\t}, {\n\t\t\textend: 'excelHtml5',\n\t\t\texportOptions: { columns: ':visible:not(.excludeFromButtons)' }\n\t\t}, {\n\t\t\textend: 'pdfHtml5',\n\t\t\texportOptions: { columns: ':visible:not(.excludeFromButtons)' }\n\t\t}, {\n\t\t\textend: 'print',\n\t\t\texportOptions: { columns: ':visible:not(.excludeFromButtons)' }\n\t\t}],\n\n\t\tdom: '<\\'row\\'<\\'col-sm-6\\'l><\\'col-sm-6\\'f>><\\'row\\'<\\'col-sm-12\\'<\\'table-responsive\\'tr>>><\\'row\\'<\\'col-sm-5\\'i><\\'col-sm-7\\'p>>B'\n\t},\n\n\t//////////////////////////////////////////////////////////////////////////////\n\t// COLUMN FILTERS\n\t//////////////////////////////////////////////////////////////////////////////\n\n\tcolumnFilters: {\n\t\t'booleanEquals': function booleanEquals(serverSide, value, dtColumn) {\n\t\t\tvar search = '';\n\n\t\t\tif (value) {\n\t\t\t\tif (serverSide) {\n\t\t\t\t\tif (value === '$EMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq null';\n\t\t\t\t\t} else if (value === '$NOTEMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' ne null';\n\t\t\t\t\t} else if (value.toLowerCase() === 'true' || value.toLowerCase() === 'false') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq ' + value.toLowerCase();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsearch = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (search !== dtColumn.search()) {\n\t\t\t\tdtColumn.search(search);\n\t\t\t\tdtColumn.draw();\n\t\t\t}\n\t\t},\n\n\t\t'numberEquals': function numberEquals(serverSide, value, dtColumn) {\n\t\t\tvar search = '';\n\n\t\t\tif (value) {\n\t\t\t\tif (serverSide) {\n\t\t\t\t\tif (value === '$EMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq null';\n\t\t\t\t\t} else if (value === '$NOTEMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' ne null';\n\t\t\t\t\t} else if (!isNaN(value)) {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq ' + value.toLowerCase();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsearch = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (search !== dtColumn.search()) {\n\t\t\t\tdtColumn.search(search);\n\t\t\t\tdtColumn.draw();\n\t\t\t}\n\t\t},\n\n\t\t'numberBetween': function numberBetween(serverSide, value, dtColumn) {\n\t\t\tvar search = '';\n\n\t\t\tif (value) {\n\t\t\t\tif (serverSide) {\n\t\t\t\t\tif (value === '$EMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq null';\n\t\t\t\t\t} else if (value === '$NOTEMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' ne null';\n\t\t\t\t\t} else if (value.toLowerCase().indexOf('to') !== -1) {\n\t\t\t\t\t\tvar nums = value.toLowerCase().split('to');\n\t\t\t\t\t\tif (!isNaN(nums[0]) || !isNaN(nums[0])) {\n\t\t\t\t\t\t\tvar searches = [];\n\t\t\t\t\t\t\tif (!isNaN(nums[0])) {\n\t\t\t\t\t\t\t\tsearches[0] = dtColumn.dataSrc() + ' ge ' + nums[0];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsearches[0] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!isNaN(nums[1])) {\n\t\t\t\t\t\t\t\tsearches[1] = dtColumn.dataSrc() + ' le ' + nums[1];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsearches[1] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsearch = searches.filter(function (val) {\n\t\t\t\t\t\t\t\treturn val;\n\t\t\t\t\t\t\t}).join(' and ');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsearch = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (search !== dtColumn.search()) {\n\t\t\t\tdtColumn.search(search);\n\t\t\t\tdtColumn.draw();\n\t\t\t}\n\t\t},\n\n\t\t'stringEquals': function stringEquals(serverSide, value, dtColumn) {\n\t\t\tvar search = '';\n\n\t\t\tif (value) {\n\t\t\t\tif (serverSide) {\n\t\t\t\t\tif (value === '$EMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq null';\n\t\t\t\t\t} else if (value === '$NOTEMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' ne null';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsearch = 'tolower(' + dtColumn.dataSrc() + ') eq \\'' + value.toLowerCase() + '\\'';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsearch = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (search !== dtColumn.search()) {\n\t\t\t\tdtColumn.search(search);\n\t\t\t\tdtColumn.draw();\n\t\t\t}\n\t\t},\n\n\t\t'stringContains': function stringContains(serverSide, value, dtColumn) {\n\t\t\tvar search = '';\n\n\t\t\tif (value) {\n\t\t\t\tif (serverSide) {\n\t\t\t\t\tif (value === '$EMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq null';\n\t\t\t\t\t} else if (value === '$NOTEMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' ne null';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar words = value.toLowerCase().split(' ');\n\t\t\t\t\t\tvar searches = [];\n\t\t\t\t\t\tfor (var i = 0, l = words.length; i < l; i++) {\n\t\t\t\t\t\t\tsearches.push('contains(tolower(' + dtColumn.dataSrc() + '),\\'' + words[i] + '\\')');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsearch = searches.join(' and ');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsearch = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (search !== dtColumn.search()) {\n\t\t\t\tdtColumn.search(search);\n\t\t\t\tdtColumn.draw();\n\t\t\t}\n\t\t},\n\t\t// },\n\n\t\t'dateEquals': function dateEquals(serverSide, value, dtColumn) {\n\t\t\tvar search = '';\n\n\t\t\tif (value) {\n\t\t\t\tif (serverSide) {\n\t\t\t\t\tif (value === '$EMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq null';\n\t\t\t\t\t} else if (value === '$NOTEMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' ne null';\n\t\t\t\t\t} else if (moment(value, 'l').isValid()) {\n\t\t\t\t\t\tvar start = moment(value, 'l').set({\n\t\t\t\t\t\t\thour: 0,\n\t\t\t\t\t\t\tminute: 0,\n\t\t\t\t\t\t\tsecond: 0,\n\t\t\t\t\t\t\tmillisecond: 0\n\t\t\t\t\t\t}).format();\n\t\t\t\t\t\tvar end = moment(start).add({\n\t\t\t\t\t\t\thours: 24\n\t\t\t\t\t\t}).format();\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' ge ' + start + ' and ' + dtColumn.dataSrc() + ' le ' + end;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsearch = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (search !== dtColumn.search()) {\n\t\t\t\tdtColumn.search(search);\n\t\t\t\tdtColumn.draw();\n\t\t\t}\n\t\t},\n\n\t\t'dateBetween': function dateBetween(serverSide, value, dtColumn) {\n\t\t\tvar search = '';\n\n\t\t\tif (value) {\n\t\t\t\tif (serverSide) {\n\t\t\t\t\tif (value === '$EMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' eq null';\n\t\t\t\t\t} else if (value === '$NOTEMPTY') {\n\t\t\t\t\t\tsearch = dtColumn.dataSrc() + ' ne null';\n\t\t\t\t\t} else if (value.toLowerCase().indexOf('to') !== -1) {\n\t\t\t\t\t\tvar dates = value.toLowerCase().split('to');\n\t\t\t\t\t\tif (moment(dates[0]).isValid() || moment(dates[1]).isValid()) {\n\t\t\t\t\t\t\tvar searches = [];\n\t\t\t\t\t\t\tif (moment(dates[0]).isValid()) {\n\t\t\t\t\t\t\t\tvar start = moment(dates[0]).set({\n\t\t\t\t\t\t\t\t\thour: 0,\n\t\t\t\t\t\t\t\t\tminute: 0,\n\t\t\t\t\t\t\t\t\tsecond: 0,\n\t\t\t\t\t\t\t\t\tmillisecond: 0\n\t\t\t\t\t\t\t\t}).format();\n\t\t\t\t\t\t\t\tsearches[0] = dtColumn.dataSrc() + ' ge ' + start;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsearches[0] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (moment(dates[1]).isValid()) {\n\t\t\t\t\t\t\t\tvar end = moment(dates[1]).set({\n\t\t\t\t\t\t\t\t\thour: 0,\n\t\t\t\t\t\t\t\t\tminute: 0,\n\t\t\t\t\t\t\t\t\tsecond: 0,\n\t\t\t\t\t\t\t\t\tmillisecond: 0\n\t\t\t\t\t\t\t\t}).add({\n\t\t\t\t\t\t\t\t\thours: 24\n\t\t\t\t\t\t\t\t}).format();\n\t\t\t\t\t\t\t\tsearches[1] = dtColumn.dataSrc() + ' le ' + end;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsearches[1] = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsearch = searches.filter(function (val) {\n\t\t\t\t\t\t\t\treturn val;\n\t\t\t\t\t\t\t}).join(' and ');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsearch = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (search !== dtColumn.search()) {\n\t\t\t\tdtColumn.search(search);\n\t\t\t\tdtColumn.draw();\n\t\t\t}\n\t\t}\n\t},\n\n\t//////////////////////////////////////////////////////////////////////////////\n\t// COLUMNS\n\t//////////////////////////////////////////////////////////////////////////////\n\n\tcolumns: {\n\t\t'id': {\n\t\t\tdata: 'id',\n\t\t\ttitle: 'ID'\n\t\t}\n\t},\n\n\t//////////////////////////////////////////////////////////////////////////////\n\t// PRE RENDERS\n\t//////////////////////////////////////////////////////////////////////////////\n\n\tpreRenders: {\n\t\t'searchFooterFactory': function searchFooterFactory(columnFilter) {\n\t\t\tif (typeof columnFilter === 'string') {\n\t\t\t\tcolumnFilter = DataTableView.columnFilters[columnFilter];\n\t\t\t}\n\t\t\treturn function (column, configuration, view) {\n\t\t\t\treturn Promise.resolve().then(function () {\n\t\t\t\t\t//     if (column.choices && typeof column.choices === 'string') {\n\t\t\t\t\t//       const url = column.choices;\n\t\t\t\t\t//       column.choices = [];\n\t\t\t\t\t//       return fetchConfigurations(url, column.choices);\n\t\t\t\t\t//     }\n\t\t\t\t\t//   }).then(() => {\n\t\t\t\t\tif (column.choices) {\n\t\t\t\t\t\tcolumn.footerHtml = '\\n            <label class=\"sr-only\" for=\"' + column.data + '_' + view.cid + '\">Search ' + (column.title || column.data) + '</label>\\n            <select class=\"form-control\" id=\"' + column.data + '_' + view.cid + '\">\\n              ' + (column.choices[0].value != null ? column.choices[0].value != '' ? '<option value=\"\"></option>' : '' : column.choices[0].text != '' ? '<option value=\"\"></option>' : '') + '\\n              ' + column.choices.map(function (choice) {\n\t\t\t\t\t\t\treturn '<option value=\"' + (choice.value !== null ? choice.value : choice.text) + '\">' + choice.text + '</option>';\n\t\t\t\t\t\t}).join('') + '\\n            </select>\\n          ';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcolumn.footerHtml = '\\n            <label class=\"sr-only\" for=\"' + column.data + '_' + view.cid + '\">Search ' + (column.title || column.data) + '</label>\\n            <input type=\"text\" class=\"form-control\" id=\"' + column.data + '_' + view.cid + '\">\\n          ';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!column.events) {\n\t\t\t\t\t\tcolumn.events = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tcolumn.events['change #' + column.data + '_' + view.cid] = function (event) {\n\t\t\t\t\t\tvar $input = $(event.currentTarget);\n\t\t\t\t\t\tcolumnFilter(configuration.serverSide, $input.val(), view.dataTable.column(+$input.closest('td').data('index')));\n\t\t\t\t\t};\n\t\t\t\t\tcolumn.events['keyup #' + column.data + '_' + view.cid] = function (event) {\n\t\t\t\t\t\tvar $input = $(event.currentTarget);\n\t\t\t\t\t\tcolumnFilter(configuration.serverSide, $input.val(), view.dataTable.column(+$input.closest('td').data('index')));\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t}\n});"]}